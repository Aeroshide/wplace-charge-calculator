<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wplace Charge Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4eb8d0 0%, #66b050 100%);
            background-size: 400% 400%;
            animation: gradientFlow 15s ease infinite;
            color: white;
            position: relative;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
            background: linear-gradient(45deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .calculator {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 400px;
        }

        .input-group {
            margin-bottom: 2rem;
        }

        .input-group label {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 0.8rem;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .input-group input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        .input-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .calculate-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            min-width: 150px;
        }

        .calculate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(238, 90, 36, 0.4);
        }

        .calculate-btn:active {
            transform: translateY(-1px);
        }

        .result {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.3s ease;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow: auto;
        }

        .result.show {
            background: rgba(204, 46, 46, 0.2);
            border-color: rgba(204, 46, 46, 0.4);
        }

        .result-text {
            font-size: 1.1rem;
            line-height: 1.6;
            font-weight: 500;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .result-time {
            font-size: 1.3rem;
            font-weight: 700;
            color: #cc2e2e;
            margin-top: 0.5rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .icon {
            font-size: 1.5rem;
            margin-right: 0.5rem;
            vertical-align: middle;
        }

        .credits {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            text-align: center;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 400;
            letter-spacing: 0.5px;
            z-index: 1000;
        }

        .credits a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .credits a:hover {
            color: #ffffff;
        }

        .credits .separator {
            margin: 0 8px;
            opacity: 0.5;
        }

        @media (max-width: 480px) {
            .calculator {
                margin: 1rem;
                padding: 2rem 1.5rem;
                width: calc(100% - 2rem);
            }
            
            .header {
                font-size: 2rem;
                margin-bottom: 1.5rem;
            }

            .credits {
                padding: 10px 15px;
                font-size: 0.7rem;
            }

            .credits .separator {
                margin: 0 4px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        Wplace Charge Calculator
    </div>
    
    <div class="calculator">
        <div class="input-group">
            <label for="chargeInput">
                Enter your charge capacity:
            </label>
            <input type="number" id="chargeInput" placeholder="Charge Capacity..." min="0" step="0.1">
        </div>
        
        <button class="calculate-btn" onclick="calculateChargeTime()">
            Calculate
        </button>
        
        <div class="result" id="result">
            <div class="result-text">Enter a value and click calculate to see when your Wplace charges will be full!</div>
        </div>
    </div>

    <div class="credits">
        Made with ❤️ by Aeroshide <span class="separator">•</span>
        <a href="https://wplace.live/">wplace.live</a> <span class="separator">•</span>
        v1.1a
    </div>

    <script>
        let countdownInterval = null;
        let targetTime = null;

        function getEscalationMessage(count) {
            const messages = [
            "Please enter a valid positive number!", "Please enter a valid positive number!", "Please enter a valid positive number!", "Please enter a valid positive number!", "Please enter a valid positive number!", "Please enter a valid positive number!", "Still not a valid number... numbers only.", "Okay, seriously. Stop.", "You're testing this on purpose, aren't you?", "Stop testing me. I have feelings.", "You're gonna have a bad time fam.", "...", "I'm gonna run out of messages for you.", "Is that what you really want?", "3 Left...", "2 Left...", "1 Left...", "...", "...", "...", "What do you really want?", "This site runs locally on your browser... It will not break.", "...", "...", "...", "Really...?", "...", "Okay okay, i get it!", "You're the type of person who likes to discover things...", "Well... since you're already here...", "You might aswell be on the game...", "...", "It has something to do with *her* name on it...", "On the apex domain...", "...", "Still confused?", "...", "Maybe you're not ready for the responsibility.", "...", "Good luck... if you're trying.", "...", "Goodbye if you're giving up.", "...", "Thanks for caring.", "...", "Bye.", "Bye.", "Bye.", "Bye.", "Bye.", "Bye.", "Please enter a valid positive number!"
            ];
            return messages[Math.min(count - 1, messages.length - 1)];
        }

        function incrementInvalidCount() {
            const raw = localStorage.getItem('chargeInvalidCount') || '0';
            const next = Math.min(999, parseInt(raw, 10) + 1);
            localStorage.setItem('chargeInvalidCount', String(next));
            return next;
        }

        function resetInvalidCount() {
            localStorage.setItem('chargeInvalidCount', '0');
        }

        function startCountdown() {
            if (!targetTime) return;
            clearInterval(countdownInterval);

            function updateCountdown() {
                const now = new Date();
                const timeLeft = targetTime.getTime() - now.getTime();

                if (timeLeft <= 0) {
                    clearInterval(countdownInterval);
                    localStorage.removeItem('targetTime'); // Clear saved time
                    targetTime = null;

                    const result = document.getElementById('result');
                    if (result) {
                        const originalTargetTime = new Date(now.getTime() + timeLeft);
                        const timeEl = result.querySelector('.result-time');
                        if (timeEl) timeEl.textContent = originalTargetTime.toLocaleString('en-US', {
                            weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
                            hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true
                        });
                        const top = result.querySelector('.result-text');
                        if (top) top.innerHTML = 'Fully charged, go back to painting pixels.';
                        const countdownEl = document.getElementById('countdownTime');
                        if (countdownEl) countdownEl.textContent = 'CHARGES ARE FULL!';
                        const countdownWrapper = document.getElementById('countdown');
                        if (countdownWrapper) countdownWrapper.style.color = '#cc2e2e';
                    }
                    resetInvalidCount();
                    return;
                }

                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                const dd = String(days).padStart(2, '0'), hh = String(hours).padStart(2, '0'),
                    mm = String(minutes).padStart(2, '0'), ss = String(seconds).padStart(2, '0');
                const countdownTimeEl = document.getElementById('countdownTime');
                if (countdownTimeEl) countdownTimeEl.textContent = `${dd}d ${hh}h ${mm}m ${ss}s`;
            }

            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
        }
        
        function displayCountdownResult(time) {
            targetTime = time;
            const result = document.getElementById('result');
            const options = {
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
                hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true
            };
            const formattedTime = time.toLocaleString('en-US', options);

            result.innerHTML = `
                <div class="result-text">
                  Your Wplace charges will be full at:
                </div>
                <div class="result-time">${formattedTime}</div>
                <div id="countdown" style="margin-top: 1rem; font-size: 1rem; font-weight: 600; color: #cc4e4e;">
                <i class="fas fa-clock"></i> <span id="countdownTime">Loading...</span>
                </div>
            `;
            result.classList.add('show');
            startCountdown();
        }

        function calculateChargeTime() {
            const input = document.getElementById('chargeInput');
            const result = document.getElementById('result');
            const x = parseFloat(input.value);

            if (isNaN(x) || x < 0) {
                const count = incrementInvalidCount();
                const msg = getEscalationMessage(count);
                result.innerHTML = `<div class="result-text" style="color: #e74c3c;"><i class="fas fa-exclamation-triangle"></i> ${msg}</div>`;
                result.classList.remove('show');
                clearInterval(countdownInterval);
                localStorage.removeItem('targetTime'); // Clear saved time on error
                targetTime = null;
                return;
            }

            resetInvalidCount();
            clearInterval(countdownInterval);

            const totalSeconds = x * 30;
            const newTargetTime = new Date(Date.now() + totalSeconds * 1000);
            
            localStorage.setItem('targetTime', newTargetTime.getTime());
            displayCountdownResult(newTargetTime);
        }
        
        document.getElementById('chargeInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateChargeTime();
            }
        });
        
        window.addEventListener('load', function() {
            document.getElementById('chargeInput').focus();

            const savedTargetTimestamp = localStorage.getItem('targetTime');
            if (savedTargetTimestamp) {
                const timestamp = parseInt(savedTargetTimestamp, 10);
                if (timestamp > Date.now()) {
                    const restoredTargetTime = new Date(timestamp);
                    displayCountdownResult(restoredTargetTime);
                } else {
                    localStorage.removeItem('targetTime'); // Clean up expired timer
                }
            }
        });
    </script>
</body>
</html>